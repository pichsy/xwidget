# XWidget 框架使用指南

## 📖 框架介绍

XWidget 是一个功能强大的 Android UI 组件库，提供了丰富的自定义控件和布局，支持圆角、渐变、阴影、立体效果、状态切换等多种视觉效果。框架采用模块化设计，每个组件都可以独立使用，同时支持多种状态下的样式切换。

### 🎯 核心特性

- **多状态支持**: 支持 normal、pressed、checked、activated、disabled 五种状态
- **渐变背景**: 支持线性渐变、多色渐变，支持四种渐变方向
- **圆角边框**: 支持统一圆角和四角独立圆角设置
- **阴影效果**: 支持自定义阴影颜色、高度、透明度
- **立体效果**: 支持3D立体按钮效果，可自定义各面高度
- **动画效果**: 支持按压缩放、透明度变化等动画
- **边框渐变**: 支持边框颜色渐变效果
- **分割线**: 支持四方向分割线设置

## 🏗️ 框架架构

### 核心模块

1. **XView 系列**: 基础控件扩展
   - `XButton` - 增强按钮
   - `XTextView` - 增强文本视图
   - `XImageView` - 增强图片视图
   - `XConstraintLayout` - 增强约束布局
   - `XLinearLayout` - 增强线性布局
   - `XFrameLayout` - 增强帧布局
   - `XRelativeLayout` - 增强相对布局
   - `XView` - 基础视图
   - `XViewGroup` - 基础视图组

2. **XCard 系列**: 卡片式布局
   - `XCardButton` - 卡片按钮
   - `XCardConstraintLayout` - 卡片约束布局
   - `XCardLinearLayout` - 卡片线性布局
   - `XCardFrameLayout` - 卡片帧布局

3. **XRound 系列**: 圆角布局
   - `XRoundButton` - 圆角按钮
   - `XRoundConstraintLayout` - 圆角约束布局
   - `XRoundLinearLayout` - 圆角线性布局
   - `XRoundImageView` - 圆角图片视图
   - `XRoundTextView` - 圆角文本视图

4. **表单控件系列**
   - `XCheckBox` - 复选框
   - `XSmoothCheckBox` - 平滑动画复选框
   - `XRadioButton` - 单选按钮
   - `XRadioGroup` - 单选组
   - `XRatingBar` - 评分条
   - `XSwitchButton` - 开关按钮
   - `XProgressBar` - 进度条
   - `XInputLayout` - 输入布局
   - `XEditText` - 增强输入框
   - `XVerificationCodeEditText` - 验证码输入框

5. **布局控件系列**
   - `XFlowLayout` - 流式布局
   - `XSpace` - 占位控件
   - `XStatusBarSpace` - 状态栏占位

6. **特殊效果系列**
   - `ShineButton` - 闪光按钮
   - `XPressScaleLayout` - 按压缩放布局
   - `XWebView` - 增强网页视图

7. **嵌套滚动系列**
   - `XNestedScrollLayout` - 嵌套滚动布局
   - `XNestedTopDelegateLayout` - 顶部代理布局
   - `XNestedBottomDelegateLayout` - 底部代理布局
   - `XNestedTopLinearLayout` - 顶部线性布局
   - `XNestedBottomRecyclerView` - 底部列表视图
   - `XNestedTopRecyclerView` - 顶部列表视图
   - `XDraggableScrollBar` - 可拖拽滚动条
   - `XNestedTopAreaBehavior` - 顶部区域行为
   - `XNestedBottomAreaBehavior` - 底部区域行为

8. **辅助工具类**
   - `XAlphaHelper` - 透明度管理
   - `XBackgroundHelper` - 背景管理
   - `XColorHelper` - 颜色处理
   - `XRoundBackgroundHelper` - 圆角背景管理
   - `XCheckableHelper` - 选中状态管理
   - `XStatusBarHelper` - 状态栏管理
   - `XDeviceHelper` - 设备信息管理
   - `XDisplayHelper` - 屏幕显示管理
   - `XGradientHelper` - 渐变背景管理

## 🚀 快速开始

### 1. 基础使用

#### 简单按钮示例

```xml
<com.pichs.xwidget.view.XButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="点击我"
    android:textColor="#FFFFFF"
    app:xp_radius="8dp"
    app:xp_backgroundGradientStartColor="#FF6B6B"
    app:xp_backgroundGradientEndColor="#4ECDC4"
    app:xp_backgroundGradientOrientation="horizontal"
    app:xp_pressedScale="0.95"
    app:xp_pressedAlpha="0.8" />
```

#### 卡片布局示例

```xml
<com.pichs.xwidget.cardview.XCardConstraintLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="16dp"
    app:xp_radius="12dp"
    app:xp_shadowElevation="4dp"
    app:xp_shadowColor="#20000000"
    app:xp_backgroundGradientColors="#FFFFFF,#F8F9FA"
    app:xp_backgroundGradientOrientation="vertical">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="卡片内容"
        android:textSize="16sp"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

</com.pichs.xwidget.cardview.XCardConstraintLayout>
```

### 2. 圆角按钮示例

```xml
<com.pichs.xwidget.roundview.XRoundButton
    android:layout_width="120dp"
    android:layout_height="48dp"
    android:text="圆角按钮"
    android:textColor="#FFFFFF"
    app:xp_radius="24dp"
    app:xp_backgroundGradientColors="#667eea,#764ba2"
    app:xp_backgroundGradientOrientation="horizontal"
    app:xp_pressedScale="0.9"
    app:xp_borderColor="#E0E0E0"
    app:xp_borderWidth="1dp" />
```

## 🎨 属性详解

### 基础属性

| 属性名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| `xp_radius` | dimension | 统一圆角半径 | `8dp` |
| `xp_radiusTopLeft` | dimension | 左上角圆角 | `8dp` |
| `xp_radiusTopRight` | dimension | 右上角圆角 | `8dp` |
| `xp_radiusBottomLeft` | dimension | 左下角圆角 | `8dp` |
| `xp_radiusBottomRight` | dimension | 右下角圆角 | `8dp` |
| `xp_borderColor` | color | 边框颜色 | `#FF0000` |
| `xp_borderWidth` | dimension | 边框宽度 | `2dp` |

### 渐变背景属性

| 属性名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| `xp_backgroundGradientStartColor` | color | 渐变开始颜色 | `#FF6B6B` |
| `xp_backgroundGradientEndColor` | color | 渐变结束颜色 | `#4ECDC4` |
| `xp_backgroundGradientColors` | string | 多色渐变 | `#FF6B6B,#4ECDC4,#45B7D1` |
| `xp_backgroundGradientOrientation` | enum | 渐变方向 | `horizontal` |

**渐变方向选项:**
- `horizontal` - 水平渐变（左到右）
- `vertical` - 垂直渐变（上到下）
- `TL_BR` - 左上到右下
- `BL_TR` - 左下到右上

### 状态相关属性

#### 按压状态 (Pressed)
| 属性名 | 类型 | 说明 |
|--------|------|------|
| `xp_pressedBackground` | color/drawable | 按压时背景 |
| `xp_pressedBackgroundGradientStartColor` | color | 按压时渐变开始色 |
| `xp_pressedBackgroundGradientEndColor` | color | 按压时渐变结束色 |
| `xp_pressedBackgroundGradientColors` | string | 按压时多色渐变 |
| `xp_pressedBorderColor` | color | 按压时边框色 |
| `xp_pressedAlpha` | float | 按压时透明度 |
| `xp_pressedScale` | float | 按压时缩放比例 |

#### 选中状态 (Checked)
| 属性名 | 类型 | 说明 |
|--------|------|------|
| `xp_checkedBackground` | color/drawable | 选中时背景 |
| `xp_checkedBackgroundGradientStartColor` | color | 选中时渐变开始色 |
| `xp_checkedBackgroundGradientEndColor` | color | 选中时渐变结束色 |
| `xp_checkedBackgroundGradientColors` | string | 选中时多色渐变 |
| `xp_checkedBorderColor` | color | 选中时边框色 |
| `xp_checkedTextColor` | color | 选中时文字颜色 |

#### 激活状态 (Activated)
| 属性名 | 类型 | 说明 |
|--------|------|------|
| `xp_activatedBackground` | color/drawable | 激活时背景 |
| `xp_activatedBackgroundGradientStartColor` | color | 激活时渐变开始色 |
| `xp_activatedBackgroundGradientEndColor` | color | 激活时渐变结束色 |
| `xp_activatedBackgroundGradientColors` | string | 激活时多色渐变 |
| `xp_activatedBorderColor` | color | 激活时边框色 |
| `xp_activatedTextColor` | color | 激活时文字颜色 |

#### 禁用状态 (Disabled)
| 属性名 | 类型 | 说明 |
|--------|------|------|
| `xp_disabledBackground` | color/drawable | 禁用时背景 |
| `xp_disabledBackgroundGradientStartColor` | color | 禁用时渐变开始色 |
| `xp_disabledBackgroundGradientEndColor` | color | 禁用时渐变结束色 |
| `xp_disabledBackgroundGradientColors` | string | 禁用时多色渐变 |
| `xp_disabledBorderColor` | color | 禁用时边框色 |
| `xp_disabledTextColor` | color | 禁用时文字颜色 |
| `xp_disabledAlpha` | float | 禁用时透明度 |
| `xp_disabledScale` | float | 禁用时缩放比例 |

### 阴影属性 (仅 XCard 系列)

| 属性名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| `xp_shadowElevation` | dimension | 阴影高度 | `4dp` |
| `xp_shadowColor` | color | 阴影颜色 | `#20000000` |
| `xp_shadowAlpha` | float | 阴影透明度 | `0.5` |
| `xp_outlineInsetTop` | dimension | 阴影上内边距 | `2dp` |
| `xp_outlineInsetLeft` | dimension | 阴影左内边距 | `2dp` |
| `xp_outlineInsetRight` | dimension | 阴影右内边距 | `2dp` |
| `xp_outlineInsetBottom` | dimension | 阴影下内边距 | `2dp` |

### 立体效果属性 (仅 XRound 系列)

| 属性名 | 类型 | 说明 |
|--------|------|------|
| `xp_cubeSidesGradientColors` | string | 立体侧面渐变颜色 |
| `xp_cubeFrontHeight` | dimension | 立体正面高度 |
| `xp_cubeBackHeight` | dimension | 立体背面高度 |
| `xp_cubeLeftHeight` | dimension | 立体左侧高度 |
| `xp_cubeRightHeight` | dimension | 立体右侧高度 |
| `xp_cubeSidesBorderColor` | color | 立体侧面边框色 |
| `xp_cubeSidesBorderWidth` | dimension | 立体侧面边框宽度 |

### 分割线属性

| 属性名 | 类型 | 说明 |
|--------|------|------|
| `xp_topDividerHeight` | dimension | 顶部分割线高度 |
| `xp_topDividerColor` | color | 顶部分割线颜色 |
| `xp_topDividerInsetLeft` | dimension | 顶部分割线左缩进 |
| `xp_topDividerInsetRight` | dimension | 顶部分割线右缩进 |
| `xp_bottomDividerHeight` | dimension | 底部分割线高度 |
| `xp_bottomDividerColor` | color | 底部分割线颜色 |
| `xp_bottomDividerInsetLeft` | dimension | 底部分割线左缩进 |
| `xp_bottomDividerInsetRight` | dimension | 底部分割线右缩进 |

## 💡 使用示例

### 1. 渐变按钮

```xml
<com.pichs.xwidget.view.XButton
    android:layout_width="200dp"
    android:layout_height="56dp"
    android:text="渐变按钮"
    android:textColor="#FFFFFF"
    android:textSize="16sp"
    app:xp_radius="28dp"
    app:xp_backgroundGradientColors="#667eea,#764ba2"
    app:xp_backgroundGradientOrientation="horizontal"
    app:xp_pressedScale="0.95"
    app:xp_pressedAlpha="0.8" />
```

### 2. 带阴影的卡片

```xml
<com.pichs.xwidget.cardview.XCardConstraintLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="16dp"
    android:padding="20dp"
    app:xp_radius="16dp"
    app:xp_shadowElevation="8dp"
    app:xp_shadowColor="#20000000"
    app:xp_backgroundGradientColors="#FFFFFF,#F8F9FA"
    app:xp_backgroundGradientOrientation="vertical"
    app:xp_borderColor="#E0E0E0"
    app:xp_borderWidth="1dp">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="卡片标题"
        android:textSize="18sp"
        android:textStyle="bold"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dp"
        android:text="这是卡片的内容描述，可以包含多行文本。"
        android:textColor="#666666"
        android:textSize="14sp"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toBottomOf="@id/title" />

</com.pichs.xwidget.cardview.XCardConstraintLayout>
```

### 3. 立体按钮

```xml
<com.pichs.xwidget.roundview.XRoundButton
    android:layout_width="120dp"
    android:layout_height="48dp"
    android:text="立体按钮"
    android:textColor="#FFFFFF"
    app:xp_radius="24dp"
    app:xp_backgroundGradientColors="#FF6B6B,#4ECDC4"
    app:xp_backgroundGradientOrientation="horizontal"
    app:xp_cubeSidesGradientColors="#E74C3C,#27AE60"
    app:xp_cubeFrontHeight="4dp"
    app:xp_cubeSidesBorderColor="#C0392B"
    app:xp_cubeSidesBorderWidth="1dp"
    app:xp_pressedScale="0.9" />
```

### 4. 状态切换按钮

```xml
<com.pichs.xwidget.view.XButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="状态按钮"
    android:textColor="#FFFFFF"
    app:xp_radius="8dp"
    app:xp_backgroundGradientStartColor="#3498DB"
    app:xp_backgroundGradientEndColor="#2980B9"
    app:xp_pressedBackgroundGradientStartColor="#E74C3C"
    app:xp_pressedBackgroundGradientEndColor="#C0392B"
    app:xp_checkedBackgroundGradientStartColor="#27AE60"
    app:xp_checkedBackgroundGradientEndColor="#229954"
    app:xp_disabledBackgroundGradientStartColor="#95A5A6"
    app:xp_disabledBackgroundGradientEndColor="#7F8C8D"
    app:xp_pressedScale="0.95"
    app:xp_pressedAlpha="0.8" />
```

### 5. 带分割线的布局

```xml
<com.pichs.xwidget.cardview.XCardLinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    app:xp_radius="12dp"
    app:xp_shadowElevation="4dp"
    app:xp_bottomDividerHeight="1dp"
    app:xp_bottomDividerColor="#E0E0E0"
    app:xp_bottomDividerInsetLeft="16dp"
    app:xp_bottomDividerInsetRight="16dp">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="16dp"
        android:text="列表项 1"
        android:textSize="16sp" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="16dp"
        android:text="列表项 2"
        android:textSize="16sp" />

</com.pichs.xwidget.cardview.XCardLinearLayout>
```

## 🔧 代码中使用

### 动态设置属性

```kotlin
// 设置圆角
button.setRadius(16f)

// 设置渐变背景
button.setBackgroundGradient(
    Color.parseColor("#FF6B6B"),
    Color.parseColor("#4ECDC4"),
    GradientOrientation.HORIZONTAL
)

// 设置多色渐变
button.setBackgroundGradientColors(
    intArrayOf(
        Color.parseColor("#FF6B6B"),
        Color.parseColor("#4ECDC4"),
        Color.parseColor("#45B7D1")
    ),
    GradientOrientation.HORIZONTAL
)

// 设置按压状态
button.setPressedBackgroundGradient(
    Color.parseColor("#E74C3C"),
    Color.parseColor("#C0392B"),
    GradientOrientation.HORIZONTAL
)

// 设置透明度
button.setAlphaOnPressed(0.8f)

// 设置缩放
button.setScaleOnPressed(0.95f)
```

### 状态监听

```kotlin
// 设置按压状态监听
button.setOnPressedStateListener(object : OnPressedStateListener {
    override fun onPressedStatusChanged(pressed: Boolean) {
        // 处理按压状态变化
        Log.d("Button", "Pressed: $pressed")
    }
})

// 设置选中状态监听
button.setOnCheckedChangeListener(object : OnCheckedChangeListener {
    override fun onCheckedChanged(buttonView: View, isChecked: Boolean) {
        // 处理选中状态变化
        Log.d("Button", "Checked: $isChecked")
    }
})
```

## 🎯 最佳实践

### 1. 性能优化

- 避免在 `onDraw` 中创建对象
- 合理使用 `WeakReference` 避免内存泄漏
- 对于频繁变化的属性，使用代码设置而非 XML

### 2. 设计规范

- 圆角半径建议使用 8dp 的倍数
- 阴影高度建议不超过 8dp
- 渐变颜色建议使用相近色系
- 按压缩放比例建议在 0.9-0.95 之间

### 3. 兼容性

- 框架支持 Android 4.0+ (API 14+)
- 阴影效果在 Android 5.0 以下使用边框模拟
- 建议在真机上测试立体效果

## 📱 表单控件

### 复选框 (XCheckBox & XSmoothCheckBox)

#### XCheckBox 基础复选框

```xml
<com.pichs.xwidget.checkbox.XCheckBox
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:src="@drawable/ic_unchecked"
    app:xp_checked_src="@drawable/ic_checked"
    app:xp_radius="8dp"
    app:xp_clickable="true" />
```

#### XSmoothCheckBox 平滑动画复选框

```xml
<com.pichs.xwidget.checkbox.XSmoothCheckBox
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    app:xp_cbox_duration="300"
    app:xp_cbox_color_tick="@android:color/white"
    app:xp_cbox_color_checked="@color/colorPrimary"
    app:xp_cbox_color_unchecked_stroke="#DFDFDF"
    app:xp_cbox_stroke_width="2dp" />
```

**XSmoothCheckBox 属性:**

| 属性名 | 类型 | 说明 | 默认值 |
|--------|------|------|--------|
| `xp_cbox_duration` | integer | 切换动画持续时间(ms) | 300 |
| `xp_cbox_stroke_width` | dimension | 未选中时边框宽度 | 宽度的1/10 |
| `xp_cbox_color_tick` | color | 对勾颜色 | Color.WHITE |
| `xp_cbox_color_checked` | color | 选中时填充颜色 | colorAccent |
| `xp_cbox_color_unchecked` | color | 未选中时填充颜色 | Color.WHITE |
| `xp_cbox_color_unchecked_stroke` | color | 未选中时边框颜色 | #DFDFDF |

### 单选按钮 (XRadioButton & XRadioGroup)

#### 单选按钮示例

```xml
<com.pichs.xwidget.radiobutton.XRadioCardButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="选项1"
    app:xp_radius="8dp"
    app:xp_ignore_radio_group="false"
    app:xp_check_state_follow_parent="true" />
```

#### 单选组示例

```xml
<com.pichs.xwidget.radiogroup.XCardLinearRadioGroup
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    app:xp_radius="8dp">

    <com.pichs.xwidget.radiobutton.XRadioCardButton
        android:layout_width="match_parent"
        android:layout_height="48dp"
        android:text="选项1" />

    <com.pichs.xwidget.radiobutton.XRadioCardButton
        android:layout_width="match_parent"
        android:layout_height="48dp"
        android:text="选项2" />

</com.pichs.xwidget.radiogroup.XCardLinearRadioGroup>
```

**单选控件属性:**

| 属性名 | 类型 | 说明 | 默认值 |
|--------|------|------|--------|
| `xp_ignore_radio_group` | boolean | 是否忽略单选组控制 | false |
| `xp_check_state_follow_parent` | boolean | 选中状态是否跟随父控件 | true |
| `xp_checked_by_click` | boolean | 是否可以通过点击选中 | true |

### 评分条 (XRatingBar)

```xml
<com.pichs.xwidget.ratingbar.XRatingBar
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    app:xp_starCount="5"
    app:xp_starSize="30dp"
    app:xp_starProgress="3.5"
    app:xp_starStep="0.5"
    app:xp_starSelectedColor="#FFC619"
    app:xp_starNormalColor="#DDDDDD"
    app:xp_borderColor="#BF961A"
    app:xp_borderWidth="1dp"
    app:xp_starCornerRadius="12dp"
    app:xp_isIndicator="false"
    app:xp_ratingGravity="left" />
```

**XRatingBar 属性:**

| 属性名 | 类型 | 说明 | 默认值 |
|--------|------|------|--------|
| `xp_starCount` | integer | 星星数量 | 5 |
| `xp_starSize` | dimension | 星星大小 | 30dp |
| `xp_starProgress` | float | 当前评分 | 0 |
| `xp_starStep` | float | 评分步长 | 1.0 |
| `xp_starSelectedColor` | color | 选中星星颜色 | #FFC619 |
| `xp_starNormalColor` | color | 未选中星星颜色 | #DDDDDD |
| `xp_borderColor` | color | 边框颜色 | 透明 |
| `xp_borderWidth` | dimension | 边框宽度 | 0 |
| `xp_starCornerRadius` | dimension | 星星圆角半径 | 0 |
| `xp_isIndicator` | boolean | 是否为指示器模式 | false |
| `xp_ratingGravity` | enum | 评分方向 | left |

### 开关按钮 (XSwitchButton)

```xml
<com.pichs.xwidget.switcher.XSwitchButton
    android:layout_width="60dp"
    android:layout_height="30dp"
    app:xp_swb_thumbColor="#FFFFFF"
    app:xp_swb_backgroundColor_switchOn="#4CAF50"
    app:xp_swb_backgroundColor_switchOff="#CCCCCC"
    app:xp_swb_thumbRadius="14dp"
    app:xp_swb_backgroundRadius="15dp"
    app:xp_swb_animationDuration="250"
    app:xp_swb_thumbRangeRatio="1.8"
    app:xp_swb_text_switchOn="开"
    app:xp_swb_text_switchOff="关" />
```

**XSwitchButton 属性:**

| 属性名 | 类型 | 说明 | 默认值 |
|--------|------|------|--------|
| `xp_swb_thumbColor` | color | 滑动块颜色 | #FFFFFF |
| `xp_swb_backgroundColor_switchOn` | color | 开启时背景色 | #4CAF50 |
| `xp_swb_backgroundColor_switchOff` | color | 关闭时背景色 | #CCCCCC |
| `xp_swb_thumbRadius` | dimension | 滑动块圆角 | 14dp |
| `xp_swb_backgroundRadius` | dimension | 背景圆角 | 15dp |
| `xp_swb_animationDuration` | integer | 动画持续时间 | 250ms |
| `xp_swb_thumbRangeRatio` | float | 滑动块范围比例 | 1.8 |
| `xp_swb_text_switchOn` | string | 开启时文字 | "" |
| `xp_swb_text_switchOff` | string | 关闭时文字 | "" |

### 进度条 (XProgressBar)

```xml
<com.pichs.xwidget.progressbar.XProgressBar
    android:layout_width="200dp"
    android:layout_height="20dp"
    app:xp_progressType="roundRect"
    app:xp_progressColor="#4CAF50"
    app:xp_backgroundColor="#E0E0E0"
    app:xp_maxValue="100"
    app:xp_value="60"
    app:xp_strokeWidth="2dp"
    app:xp_strokeRoundCap="true"
    app:xp_textSize="12sp"
    app:xp_textColor="#333333" />
```

**XProgressBar 属性:**

| 属性名 | 类型 | 说明 | 默认值 |
|--------|------|------|--------|
| `xp_progressType` | enum | 进度条类型(rect/circle/roundRect) | rect |
| `xp_progressColor` | color | 进度颜色 | #4CAF50 |
| `xp_backgroundColor` | color | 背景颜色 | #E0E0E0 |
| `xp_maxValue` | integer | 最大值 | 100 |
| `xp_value` | integer | 当前值 | 0 |
| `xp_strokeWidth` | dimension | 描边宽度 | 2dp |
| `xp_strokeRoundCap` | boolean | 是否使用圆角描边 | false |
| `xp_textSize` | dimension | 文字大小 | 12sp |
| `xp_textColor` | color | 文字颜色 | #333333 |

### 输入布局 (XInputLayout)

```xml
<com.pichs.xwidget.input.XInputLayout
    android:layout_width="match_parent"
    android:layout_height="48dp"
    android:hint="请输入密码"
    android:textColorHint="#999999"
    app:xp_radius="8dp"
    app:xp_clearIconVisible="true"
    app:xp_eyeIconVisible="true"
    app:xp_textPassword="true"
    app:xp_clearIconColorFilter="#666666"
    app:xp_eyeIconColorFilter="#666666"
    app:xp_clearDrawable="@drawable/ic_clear"
    app:xp_eyeOpenDrawable="@drawable/ic_eye_open"
    app:xp_eyeCloseDrawable="@drawable/ic_eye_close" />
```

**XInputLayout 属性:**

| 属性名 | 类型 | 说明 | 默认值 |
|--------|------|------|--------|
| `xp_clearIconVisible` | boolean | 是否显示清除图标 | false |
| `xp_eyeIconVisible` | boolean | 是否显示眼睛图标 | false |
| `xp_textPassword` | boolean | 是否为密码输入 | false |
| `xp_clearIconColorFilter` | color | 清除图标颜色滤镜 | 无 |
| `xp_eyeIconColorFilter` | color | 眼睛图标颜色滤镜 | 无 |
| `xp_clearDrawable` | drawable | 清除图标 | 默认图标 |
| `xp_eyeOpenDrawable` | drawable | 眼睛开启图标 | 默认图标 |
| `xp_eyeCloseDrawable` | drawable | 眼睛关闭图标 | 默认图标 |
| `xp_disableCopyAndPaste` | boolean | 禁用复制粘贴 | false |
| `xp_clearIcon_padding` | dimension | 清除图标内边距 | 0 |
| `xp_clearIcon_width` | dimension | 清除图标宽度 | 26dp |
| `xp_clearIcon_height` | dimension | 清除图标高度 | 26dp |
| `xp_eyeIcon_padding` | dimension | 眼睛图标内边距 | 0 |
| `xp_eyeIcon_width` | dimension | 眼睛图标宽度 | 30dp |
| `xp_eyeIcon_height` | dimension | 眼睛图标高度 | 30dp |
| `xp_inputType_password` | flag | 密码输入类型 | textPassword |
| `xp_inputType_normal` | flag | 普通输入类型 | text |

### 验证码输入框 (XVerificationCodeEditText)

```xml
<com.pichs.xwidget.edittext.XVerificationCodeEditText
    android:layout_width="match_parent"
    android:layout_height="60dp"
    app:xp_maxNumber="6"
    app:xp_boxType="underline"
    app:xp_borderColor="#4CAF50"
    app:xp_borderNoTextColor="#E0E0E0"
    app:xp_textColor="#333333"
    app:xp_cursorColor="#4CAF50"
    app:xp_cursorWidth="2dp"
    app:xp_cursorDuration="500"
    app:xp_showCursor="true"
    app:xp_textPassword="false"
    app:xp_horizontalSpacing="8dp"
    app:xp_borderWidth="2dp"
    app:xp_radius="4dp"
    app:xp_borderLoadingColor="#FF9800"
    app:xp_borderErrorColor="#F44336" />
```

**XVerificationCodeEditText 属性:**

| 属性名 | 类型 | 说明 | 默认值 |
|--------|------|------|--------|
| `xp_maxNumber` | integer | 最大输入位数 | 6 |
| `xp_boxType` | enum | 输入框类型(hollow/solid/underline) | hollow |
| `xp_borderColor` | color | 有数字时的边框颜色 | Color.GRAY |
| `xp_borderNoTextColor` | color | 无数字时的边框颜色 | Color.GRAY |
| `xp_blockColor` | color | 实心块颜色 | Color.BLUE |
| `xp_textColor` | color | 文字颜色 | Color.GRAY |
| `xp_cursorColor` | color | 光标颜色 | Color.GRAY |
| `xp_cursorWidth` | dimension | 光标宽度 | 2dp |
| `xp_cursorDuration` | integer | 光标闪烁间隔(ms) | 500 |
| `xp_showCursor` | boolean | 是否显示光标 | true |
| `xp_textPassword` | boolean | 是否为密码模式 | false |
| `xp_horizontalSpacing` | dimension | 水平间距 | 0dp |
| `xp_borderWidth` | dimension | 边框宽度 | 5dp |
| `xp_radius` | dimension | 圆角半径 | 0dp |
| `xp_borderLoadingColor` | color | 加载动画边框颜色 | Color.LTGRAY |
| `xp_borderErrorColor` | color | 错误状态边框颜色 | Color.RED |

## 🎨 布局控件

### 流式布局 (XFlowLayout)

```xml
<com.pichs.xwidget.flowlayout.XFlowLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="16dp"
    app:xp_childHorizontalSpacing="8dp"
    app:xp_childVerticalSpacing="8dp"
    app:xp_maxNumber="10"
    android:maxLines="3">

    <com.pichs.xwidget.cardview.XCardButton
        android:layout_width="wrap_content"
        android:layout_height="32dp"
        android:text="标签1"
        app:xp_radius="16dp" />

    <com.pichs.xwidget.cardview.XCardButton
        android:layout_width="wrap_content"
        android:layout_height="32dp"
        android:text="标签2"
        app:xp_radius="16dp" />

</com.pichs.xwidget.flowlayout.XFlowLayout>
```

**XFlowLayout 属性:**

| 属性名 | 类型 | 说明 | 默认值 |
|--------|------|------|--------|
| `xp_childHorizontalSpacing` | dimension | 子控件水平间距 | 0dp |
| `xp_childVerticalSpacing` | dimension | 子控件垂直间距 | 0dp |
| `xp_maxNumber` | integer | 最大子控件数量 | 无限制 |
| `android:maxLines` | integer | 最大行数 | 无限制 |

### 占位控件 (XSpace & XStatusBarSpace)

```xml
<!-- 普通占位 -->
<com.pichs.xwidget.space.XSpace
    android:layout_width="match_parent"
    android:layout_height="16dp" />

<!-- 状态栏占位 -->
<com.pichs.xwidget.space.XStatusBarSpace
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />
```

## ✨ 特殊效果

### 闪光按钮 (ShineButton)

```xml
<com.pichs.xwidget.shinebutton.ShineButton
    android:layout_width="50dp"
    android:layout_height="50dp"
    app:xp_shine_normal_color="#C3C0C0"
    app:xp_shine_checked_color="#6D05E3"
    app:xp_shine_big_shine_color="#900CE1"
    app:xp_shine_small_shine_color="#0C6E8C"
    app:xp_shine_count="5"
    app:xp_shine_size="50dp"
    app:xp_shine_animation_duration="1500"
    app:xp_shine_click_animation_duration="200"
    app:xp_shine_enable_flashing="true"
    app:xp_shine_flashing_colors="#FFEB3B,#C1AF15,#E68E0B,#E34C26"
    app:xp_shine_icon_image="@drawable/ic_star" />
```

**ShineButton 属性:**

| 属性名 | 类型 | 说明 | 默认值 |
|--------|------|------|--------|
| `xp_shine_normal_color` | color | 未选中时颜色 | #AAAAAA |
| `xp_shine_checked_color` | color | 选中时颜色 | colorAccent |
| `xp_shine_big_shine_color` | color | 大闪光点颜色 | 选中时颜色 |
| `xp_shine_small_shine_color` | color | 小闪光点颜色 | #666666 |
| `xp_shine_count` | integer | 闪光点数量 | 7 |
| `xp_shine_size` | dimension | 闪光点大小 | 按钮宽度的一半 |
| `xp_shine_animation_duration` | integer | 发散动画持续时间 | 1500ms |
| `xp_shine_click_animation_duration` | integer | 点击动画持续时间 | 200ms |
| `xp_shine_enable_flashing` | boolean | 是否开启闪烁 | false |
| `xp_shine_flashing_colors` | string | 闪烁颜色列表 | 无 |
| `xp_shine_icon_image` | drawable | 图标资源 | 无 |

### 按压缩放布局 (XPressScaleLayout)

```xml
<com.pichs.xwidget.pressedscale.XPressScaleConstraintLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    app:xp_pressedScale="0.95"
    app:xp_pressedAlpha="0.8">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="按压缩放效果"
        android:padding="16dp"
        android:background="#FF6B6B"
        android:textColor="#FFFFFF" />

</com.pichs.xwidget.pressedscale.XPressScaleConstraintLayout>
```

### 增强网页视图 (XWebView)

```xml
<com.pichs.xwidget.webview.XWebView
    android:id="@+id/web_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />
```

## 🔄 嵌套滚动组件

### 嵌套滚动布局 (XNestedScrollLayout)

XNestedScrollLayout 是一个功能强大的嵌套滚动布局，支持顶部固定区域、底部固定区域和中间可滚动区域的复杂布局。

```xml
<com.pichs.xwidget.nestedscroll.XNestedScrollLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    app:xp_topAreaHeight="200dp"
    app:xp_bottomAreaHeight="100dp"
    app:xp_topAreaBehavior="pin"
    app:xp_bottomAreaBehavior="pin">

    <!-- 顶部固定区域 -->
    <com.pichs.xwidget.nestedscroll.XNestedTopDelegateLayout
        android:layout_width="match_parent"
        android:layout_height="200dp"
        app:layout_behavior="com.pichs.xwidget.nestedscroll.XNestedTopAreaBehavior">

        <ImageView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:src="@drawable/header_image"
            android:scaleType="centerCrop" />

    </com.pichs.xwidget.nestedscroll.XNestedTopDelegateLayout>

    <!-- 中间可滚动区域 -->
    <androidx.recyclerview.widget.RecyclerView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:layout_behavior="com.pichs.xwidget.nestedscroll.XNestedBottomAreaBehavior" />

    <!-- 底部固定区域 -->
    <com.pichs.xwidget.nestedscroll.XNestedBottomDelegateLayout
        android:layout_width="match_parent"
        android:layout_height="100dp"
        app:layout_behavior="com.pichs.xwidget.nestedscroll.XNestedBottomAreaBehavior">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="horizontal"
            android:gravity="center">

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="确定" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="取消" />

        </LinearLayout>

    </com.pichs.xwidget.nestedscroll.XNestedBottomDelegateLayout>

</com.pichs.xwidget.nestedscroll.XNestedScrollLayout>
```

### 可拖拽滚动条 (XDraggableScrollBar)

XDraggableScrollBar 是一个可拖拽的滚动条组件，提供更好的滚动体验。

```xml
<com.pichs.xwidget.nestedscroll.XDraggableScrollBar
    android:layout_width="4dp"
    android:layout_height="match_parent"
    android:layout_gravity="end"
    android:layout_marginEnd="8dp"
    app:xp_scrollBarColor="#80000000"
    app:xp_scrollBarWidth="4dp"
    app:xp_scrollBarRadius="2dp"
    app:xp_scrollBarMinHeight="40dp"
    app:xp_scrollBarAlpha="0.6" />
```

**XDraggableScrollBar 属性:**

| 属性名 | 类型 | 说明 | 默认值 |
|--------|------|------|--------|
| `xp_scrollBarColor` | color | 滚动条颜色 | #80000000 |
| `xp_scrollBarWidth` | dimension | 滚动条宽度 | 4dp |
| `xp_scrollBarRadius` | dimension | 滚动条圆角 | 2dp |
| `xp_scrollBarMinHeight` | dimension | 滚动条最小高度 | 40dp |
| `xp_scrollBarAlpha` | float | 滚动条透明度 | 0.6 |

### 嵌套滚动组件使用示例

#### 1. 顶部固定 + 中间滚动 + 底部固定

```xml
<com.pichs.xwidget.nestedscroll.XNestedScrollLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <!-- 顶部固定区域 -->
    <com.pichs.xwidget.nestedscroll.XNestedTopLinearLayout
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:background="#FF6B6B"
        app:layout_behavior="com.pichs.xwidget.nestedscroll.XNestedTopAreaBehavior">

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="顶部固定区域"
            android:textColor="#FFFFFF"
            android:textSize="18sp" />

    </com.pichs.xwidget.nestedscroll.XNestedTopLinearLayout>

    <!-- 中间滚动区域 -->
    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recycler_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:layout_behavior="com.pichs.xwidget.nestedscroll.XNestedBottomAreaBehavior" />

    <!-- 底部固定区域 -->
    <com.pichs.xwidget.nestedscroll.XNestedBottomDelegateLayout
        android:layout_width="match_parent"
        android:layout_height="80dp"
        android:background="#FFFFFF"
        app:layout_behavior="com.pichs.xwidget.nestedscroll.XNestedBottomAreaBehavior">

        <Button
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="16dp"
            android:text="底部按钮" />

    </com.pichs.xwidget.nestedscroll.XNestedBottomDelegateLayout>

</com.pichs.xwidget.nestedscroll.XNestedScrollLayout>
```

#### 2. 带滚动条的列表

```xml
<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recycler_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <com.pichs.xwidget.nestedscroll.XDraggableScrollBar
        android:layout_width="4dp"
        android:layout_height="match_parent"
        android:layout_gravity="end"
        android:layout_marginEnd="8dp"
        app:xp_scrollBarColor="#4CAF50"
        app:xp_scrollBarWidth="4dp"
        app:xp_scrollBarRadius="2dp"
        app:xp_scrollBarMinHeight="60dp"
        app:xp_scrollBarAlpha="0.8" />

</FrameLayout>
```

### 嵌套滚动代码使用

```kotlin
// 设置滚动监听
nestedScrollLayout.setOnScrollChangeListener(object : OnScrollChangeListener {
    override fun onScrollChange(v: View, scrollX: Int, scrollY: Int, oldScrollX: Int, oldScrollY: Int) {
        // 处理滚动事件
        Log.d("NestedScroll", "ScrollY: $scrollY")
    }
})

// 设置顶部区域行为
val topBehavior = nestedScrollLayout.getTopAreaBehavior()
topBehavior.setScrollFlags(Behavior.SCROLL_FLAG_SCROLL or Behavior.SCROLL_FLAG_EXIT_UNTIL_COLLAPSED)

// 设置底部区域行为
val bottomBehavior = nestedScrollLayout.getBottomAreaBehavior()
bottomBehavior.setScrollFlags(Behavior.SCROLL_FLAG_SCROLL or Behavior.SCROLL_FLAG_ENTER_ALWAYS)

// 滚动到指定位置
nestedScrollLayout.scrollTo(0, 500)

// 平滑滚动
nestedScrollLayout.smoothScrollTo(0, 500)
```

## 🔧 代码中使用表单控件

### 复选框监听

```kotlin
// XCheckBox 监听
checkBox.setOnCheckedChangeListener(object : OnCheckedChangeListener {
    override fun onCheckedChanged(buttonView: View, isChecked: Boolean) {
        Log.d("CheckBox", "Checked: $isChecked")
    }
})

// XSmoothCheckBox 监听
smoothCheckBox.setOnCheckedChangeListener(object : OnCheckedChangeListener {
    override fun onCheckedChanged(buttonView: View, isChecked: Boolean) {
        Log.d("SmoothCheckBox", "Checked: $isChecked")
    }
})
```

### 单选组监听

```kotlin
radioGroup.setOnCheckedChangeListener(object : OnRadioCheckedListener {
    override fun onCheckedChanged(group: ViewGroup, checkedId: Int) {
        val checkedButton = group.findViewById<View>(checkedId)
        Log.d("RadioGroup", "Selected: ${checkedButton.tag}")
    }
})
```

### 评分条监听

```kotlin
ratingBar.setOnRatingBarChangeListener(object : OnRatingBarChangeListener {
    override fun onRatingChanged(ratingBar: XRatingBar, rating: Float, fromUser: Boolean) {
        Log.d("RatingBar", "Rating: $rating")
    }
})
```

### 开关监听

```kotlin
switchButton.setOnCheckedChangeListener(object : CompoundButton.OnCheckedChangeListener {
    override fun onCheckedChanged(buttonView: CompoundButton, isChecked: Boolean) {
        Log.d("Switch", "Checked: $isChecked")
    }
})
```

### 进度条设置

```kotlin
// 设置进度
progressBar.setProgress(75)

// 设置最大值
progressBar.setMaxValue(200)

// 设置进度监听
progressBar.setOnProgressChangeListener(object : OnProgressChangeListener {
    override fun onProgressChanged(progressBar: XProgressBar, progress: Int, fromUser: Boolean) {
        Log.d("ProgressBar", "Progress: $progress")
    }
})
```

### 输入布局监听

```kotlin
inputLayout.setOnTextChangeListener(object : TextWatcher {
    override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {}
    
    override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {
        Log.d("InputLayout", "Text: $s")
    }
    
    override fun afterTextChanged(s: Editable?) {}
})

// 获取输入内容
val text = inputLayout.getText().toString()

// 设置输入内容
inputLayout.setText("预设内容")

### 验证码输入框监听

```kotlin
verificationCodeEditText.setTextChangedListener(object : TextChangedListener {
    override fun textChanged(changeText: CharSequence) {
        // 输入/删除监听
        Log.d("VerificationCode", "Text changed: $changeText")
    }

    override fun textCompleted(text: CharSequence) {
        // 输入完成
        Log.d("VerificationCode", "Text completed: $text")
        // 验证码输入完成，可以开始验证
        verifyCode(text.toString())
    }

    override fun errorCompleted() {
        // 错误提示完成
        Log.d("VerificationCode", "Error animation completed")
    }
})

// 开始加载动画
verificationCodeEditText.startLoading()

// 停止加载动画
verificationCodeEditText.stopLoading(true) // true表示成功，false表示失败

// 清空内容
verificationCodeEditText.clearText()

// 设置最大位数
verificationCodeEditText.setMaxNumber(4)

// 设置输入框类型
verificationCodeEditText.setType(XVerificationCodeEditText.TYPE_UNDERLINE)
```

### 嵌套滚动监听

```kotlin
// 设置滚动监听
nestedScrollLayout.setOnScrollChangeListener(object : OnScrollChangeListener {
    override fun onScrollChange(v: View, scrollX: Int, scrollY: Int, oldScrollX: Int, oldScrollY: Int) {
        // 处理滚动事件
        Log.d("NestedScroll", "ScrollY: $scrollY")
        
        // 根据滚动位置调整UI
        if (scrollY > 100) {
            // 滚动超过100px时的处理
            updateHeaderAlpha(scrollY)
        }
    }
})

// 设置顶部区域行为
val topBehavior = nestedScrollLayout.getTopAreaBehavior()
topBehavior.setScrollFlags(Behavior.SCROLL_FLAG_SCROLL or Behavior.SCROLL_FLAG_EXIT_UNTIL_COLLAPSED)

// 设置底部区域行为
val bottomBehavior = nestedScrollLayout.getBottomAreaBehavior()
bottomBehavior.setScrollFlags(Behavior.SCROLL_FLAG_SCROLL or Behavior.SCROLL_FLAG_ENTER_ALWAYS)

// 滚动到指定位置
nestedScrollLayout.scrollTo(0, 500)

// 平滑滚动
nestedScrollLayout.smoothScrollTo(0, 500)

// 获取当前滚动位置
val currentScrollY = nestedScrollLayout.getScrollY()
```

## 🛠️ 工具类使用

### 状态栏管理 (XStatusBarHelper)

XStatusBarHelper 提供了丰富的状态栏管理功能，包括沉浸式状态栏、透明状态栏、状态栏字体颜色设置等。

#### 基础使用

```kotlin
// 沉浸式状态栏
XStatusBarHelper.immersiveStatusBar(activity)

// 透明状态栏
XStatusBarHelper.transparentStatusBar(activity.window)

// 透明导航栏
XStatusBarHelper.transparentNavigationBar(activity.window)

// 设置状态栏字体为黑色
XStatusBarHelper.setStatusBarFontBlackColor(activity)

// 设置状态栏字体为白色
XStatusBarHelper.setStatusBarFontWhiteColor(activity)

// 适配刘海屏
XStatusBarHelper.handleDisplayCutoutMode(activity)

// 获取状态栏高度
val statusBarHeight = XStatusBarHelper.getStatusBarHeight(context)

// 获取导航栏高度
val navigationHeight = XStatusBarHelper.getNavigationHeight()

// 设置全屏
XStatusBarHelper.setFullScreen(activity)

// 检查是否支持透明状态栏
val isSupport = XStatusBarHelper.supportTranslucentStatusBar6()
```

#### 高级使用

```kotlin
// 在 Activity 中使用
class MainActivity : AppCompatActivity() {
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        
        // 设置沉浸式状态栏
        XStatusBarHelper.immersiveStatusBar(this)
        
        // 设置状态栏字体颜色（根据背景色自动调整）
        if (isLightBackground()) {
            XStatusBarHelper.setStatusBarFontBlackColor(this)
        } else {
            XStatusBarHelper.setStatusBarFontWhiteColor(this)
        }
        
        // 适配刘海屏
        XStatusBarHelper.handleDisplayCutoutMode(this)
        
        setContentView(R.layout.activity_main)
    }
    
    override fun onWindowFocusChanged(hasFocus: Boolean) {
        super.onWindowFocusChanged(hasFocus)
        // 配合全屏使用
        XStatusBarHelper.onWindowFocusChanged(this, hasFocus)
    }
}
```

### 颜色处理 (XColorHelper)

XColorHelper 提供了颜色处理的各种实用方法，包括透明度设置、颜色插值、颜色解析等。

#### 基础使用

```kotlin
// 设置颜色透明度
val transparentColor = XColorHelper.setColorAlpha(Color.RED, 0.5f)

// 颜色插值计算
val interpolatedColor = XColorHelper.computeColor(Color.RED, Color.BLUE, 0.5f)

// 颜色转字符串
val colorString = XColorHelper.colorToString(Color.RED) // "#FFFF0000"

// 解析颜色字符串
val color = XColorHelper.parseColor("#FF0000")
val color2 = XColorHelper.parseColor("#F00") // 支持简写
val color3 = XColorHelper.parseColor("#80FF0000") // 支持透明度

// 检查颜色格式
val isValid = XColorHelper.isColorStringFormat("#FF0000") // true
val isValid2 = XColorHelper.isColorStringFormat("FF0000") // false

// 数组转换
val colorArray = XColorHelper.toIntArray(arrayListOf(Color.RED, Color.GREEN, Color.BLUE))
```

#### 高级使用

```kotlin
// 创建渐变颜色数组
val gradientColors = arrayOf(
    XColorHelper.parseColor("#FF6B6B"),
    XColorHelper.parseColor("#4ECDC4"),
    XColorHelper.parseColor("#45B7D1")
)

// 动态调整透明度
fun updateButtonAlpha(progress: Float) {
    val alpha = 0.3f + (0.7f * progress) // 0.3 到 1.0 之间
    val color = XColorHelper.setColorAlpha(buttonColor, alpha)
    button.setBackgroundColor(color)
}

// 颜色过渡动画
fun animateColorChange(fromColor: Int, toColor: Int, duration: Long) {
    val animator = ValueAnimator.ofFloat(0f, 1f)
    animator.duration = duration
    animator.addUpdateListener { animation ->
        val fraction = animation.animatedValue as Float
        val color = XColorHelper.computeColor(fromColor, toColor, fraction)
        view.setBackgroundColor(color)
    }
    animator.start()
}
```

### 设备信息管理 (XDeviceHelper)

XDeviceHelper 提供了设备信息检测功能，包括系统类型、设备型号、权限检查等。

#### 基础使用

```kotlin
// 系统类型检测
val isMIUI = XDeviceHelper.isMIUI()
val isFlyme = XDeviceHelper.isFlyme()
val isMeizu = XDeviceHelper.isMeizu()
val isXiaomi = XDeviceHelper.isXiaomi()
val isVivo = XDeviceHelper.isVivo()
val isOppo = XDeviceHelper.isOppo()
val isHuawei = XDeviceHelper.isHuawei()

// MIUI 版本检测
val isMIUIV5 = XDeviceHelper.isMIUIV5()
val isMIUIV6 = XDeviceHelper.isMIUIV6()
val isMIUIV7 = XDeviceHelper.isMIUIV7()
val isMIUIV8 = XDeviceHelper.isMIUIV8()
val isMIUIV9 = XDeviceHelper.isMIUIV9()

// Flyme 版本检测
val isFlymeLowerThan8 = XDeviceHelper.isFlymeLowerThan8()
val isFlymeVersionHigher5_2_4 = XDeviceHelper.isFlymeVersionHigher5_2_4()

// 特殊设备检测
val isZUKZ1 = XDeviceHelper.isZUKZ1()
val isZTKC2016 = XDeviceHelper.isZTKC2016()
val isEssentialPhone = XDeviceHelper.isEssentialPhone()

// 平板检测
val isTablet = XDeviceHelper.isTablet(context)

// 悬浮窗权限检查
val hasFloatWindowPermission = XDeviceHelper.isFloatWindowOpAllowed(context)
```

#### 高级使用

```kotlin
// 根据设备类型适配UI
fun adaptUIForDevice(context: Context) {
    when {
        XDeviceHelper.isMIUI() -> {
            // MIUI 系统特殊处理
            if (XDeviceHelper.isMIUIV9()) {
                // MIUI 9 特殊适配
                setMIUI9Style()
            }
        }
        XDeviceHelper.isFlyme() -> {
            // Flyme 系统特殊处理
            if (XDeviceHelper.isFlymeVersionHigher5_2_4()) {
                setFlymeStyle()
            }
        }
        XDeviceHelper.isHuawei() -> {
            // 华为设备特殊处理
            setHuaweiStyle()
        }
    }
    
    // 检查悬浮窗权限
    if (!XDeviceHelper.isFloatWindowOpAllowed(context)) {
        requestFloatWindowPermission()
    }
}

// 设备兼容性检查
fun checkDeviceCompatibility(): Boolean {
    return !XDeviceHelper.isZUKZ1() && !XDeviceHelper.isZTKC2016()
}
```

### 屏幕显示管理 (XDisplayHelper)

XDisplayHelper 提供了屏幕信息获取、单位转换、屏幕适配等功能。

#### 基础使用

```kotlin
// 获取屏幕信息
val screenWidth = XDisplayHelper.getScreenWidth(context)
val screenHeight = XDisplayHelper.getScreenHeight(context)
val realScreenWidth = XDisplayHelper.getRealScreenWidth(context)
val realScreenHeight = XDisplayHelper.getRealScreenHeight(context)
val physicalWidth = XDisplayHelper.getPhysicalWidth(context)
val physicalHeight = XDisplayHelper.getPhysicalHeight(context)

// 获取屏幕尺寸
val screenSize = XDisplayHelper.getRealScreenSize(context)
val width = screenSize[0]
val height = screenSize[1]

// 单位转换
val px = XDisplayHelper.dp2px(context, 16f)
val dp = XDisplayHelper.px2dp(context, 48)
val sp = XDisplayHelper.sp2px(context, 14f)
val spValue = XDisplayHelper.px2sp(context, 42)

// 获取系统信息
val density = XDisplayHelper.getDensity(context)
val fontDensity = XDisplayHelper.getFontDensity(context)
val displayMetrics = XDisplayHelper.getDisplayMetrics(context)
```

#### 高级使用

```kotlin
// 屏幕适配
fun adaptScreenSize(context: Context) {
    val screenWidth = XDisplayHelper.getScreenWidth(context)
    val screenHeight = XDisplayHelper.getScreenHeight(context)
    
    // 根据屏幕尺寸调整布局
    if (screenWidth > 720) {
        // 大屏设备
        setLargeScreenLayout()
    } else {
        // 小屏设备
        setSmallScreenLayout()
    }
    
    // 检查是否有导航栏
    if (XDisplayHelper.hasNavigationBar(context)) {
        val navHeight = XDisplayHelper.getNavigationBarHeight(context)
        adjustLayoutForNavigationBar(navHeight)
    }
}

// 刘海屏适配
fun adaptNotchScreen(context: Context) {
    when {
        XDeviceHelper.isHuawei() -> {
            val isNotchEnabled = XDisplayHelper.huaweiIsNotchSetToShowInSetting(context)
            if (isNotchEnabled) {
                setNotchLayout()
            }
        }
        XDeviceHelper.isXiaomi() -> {
            val isNotchEnabled = XDisplayHelper.xiaomiIsNotchSetToShowInSetting(context)
            if (isNotchEnabled) {
                setNotchLayout()
            }
        }
    }
}

// 动态单位转换
fun createResponsiveLayout(context: Context) {
    val baseSize = XDisplayHelper.dp2px(context, 16f)
    val titleSize = XDisplayHelper.sp2px(context, 18f)
    val marginSize = XDisplayHelper.dp2px(context, 8f)
    
    // 根据屏幕密度调整
    val density = XDisplayHelper.getDensity(context)
    val adjustedSize = (baseSize * density).toInt()
}
```

### 渐变背景管理 (XGradientHelper)

XGradientHelper 提供了渐变背景的创建和管理功能，支持多种渐变效果和状态选择器。

#### 基础使用

```kotlin
// 创建简单的渐变背景
val gradientDrawable = XGradientHelper.getGradientDrawable(
    radius = XDisplayHelper.dp2px(context, 8f),
    gradientOrientation = GradientDrawable.Orientation.LEFT_RIGHT,
    gradientColors = intArrayOf(Color.RED, Color.BLUE)
)

// 创建带边框的渐变背景
val borderedGradient = XGradientHelper.getDrawable(
    radius = XDisplayHelper.dp2px(context, 12f),
    fillColor = Color.TRANSPARENT,
    strokeWidth = XDisplayHelper.dp2px(context, 2f),
    strokeColor = Color.GRAY
)

// 使用建造者模式创建复杂渐变
val complexGradient = XGradientHelper.GradientDrawableBuilder()
    .setRadius(XDisplayHelper.dp2px(context, 16f))
    .setTopLeftRadius(XDisplayHelper.dp2px(context, 20f))
    .setGradientColors(intArrayOf(Color.parseColor("#667eea"), Color.parseColor("#764ba2")))
    .setOrientation(GradientDrawable.Orientation.TL_BR)
    .setStrokeWidth(XDisplayHelper.dp2px(context, 1f))
    .setStrokeColor(Color.WHITE)
    .build()
```

#### 状态选择器

```kotlin
// 创建颜色状态选择器
val colorStateList = XGradientHelper.ColorStateListBuilder()
    .addPressedColor(Color.parseColor("#E74C3C"))
    .addCheckedColor(Color.parseColor("#27AE60"))
    .addActivatedColor(Color.parseColor("#3498DB"))
    .setUnSateColor(Color.parseColor("#95A5A6"))
    .build()

// 创建背景状态选择器
val stateListDrawable = XGradientHelper.StateListDrawableBuilder()
    .addPressedState(Color.parseColor("#E74C3C"))
    .addCheckedState(Color.parseColor("#27AE60"))
    .addActivatedState(Color.parseColor("#3498DB"))
    .setUnState(Color.parseColor("#95A5A6"))
    .build()

// 应用到按钮
button.background = stateListDrawable
button.setTextColor(colorStateList)
```

#### 高级使用

```kotlin
// 创建立体按钮效果
fun create3DButton(context: Context): LayerDrawable {
    val topGradient = XGradientHelper.getGradientDrawable(
        radius = XDisplayHelper.dp2px(context, 8f),
        gradientOrientation = GradientDrawable.Orientation.TOP_BOTTOM,
        gradientColors = intArrayOf(Color.parseColor("#FF6B6B"), Color.parseColor("#4ECDC4"))
    )
    
    val bottomGradient = XGradientHelper.getGradientDrawable(
        radius = XDisplayHelper.dp2px(context, 8f),
        gradientOrientation = GradientDrawable.Orientation.TOP_BOTTOM,
        gradientColors = intArrayOf(Color.parseColor("#E74C3C"), Color.parseColor("#27AE60"))
    )
    
    return XGradientHelper.getLayerDrawable(
        top = topGradient,
        bottom = bottomGradient,
        insetBottom = XDisplayHelper.dp2px(context, 4f)
    )
}

// 动态创建渐变背景
fun createDynamicGradient(context: Context, colors: List<Int>): GradientDrawable {
    return XGradientHelper.GradientDrawableBuilder()
        .setRadius(XDisplayHelper.dp2px(context, 12f))
        .setGradientColors(colors.toIntArray())
        .setOrientation(GradientDrawable.Orientation.LEFT_RIGHT)
        .build()
}

// 创建带阴影的渐变背景
fun createGradientWithShadow(context: Context): Drawable {
    val gradient = XGradientHelper.getGradientDrawable(
        radius = XDisplayHelper.dp2px(context, 16f),
        gradientOrientation = GradientDrawable.Orientation.TL_BR,
        gradientColors = intArrayOf(
            Color.parseColor("#667eea"),
            Color.parseColor("#764ba2"),
            Color.parseColor("#f093fb")
        )
    )
    
    // 添加阴影效果
    val shadowDrawable = XGradientHelper.getDrawable(
        radius = XDisplayHelper.dp2px(context, 16f),
        fillColor = Color.parseColor("#20000000"),
        strokeWidth = 0,
        strokeColor = Color.TRANSPARENT
    )
    
    return XGradientHelper.getLayerDrawable(
        topDrawable = gradient,
        bottomDrawable = shadowDrawable,
        left = XDisplayHelper.dp2px(context, 4f),
        top = XDisplayHelper.dp2px(context, 4f),
        right = 0,
        bottom = 0
    )
}
```

### 工具类最佳实践

```kotlin
// 统一的屏幕适配工具类
object ScreenAdapter {
    fun adaptStatusBar(activity: Activity, isLightBackground: Boolean = true) {
        XStatusBarHelper.immersiveStatusBar(activity)
        XStatusBarHelper.handleDisplayCutoutMode(activity)
        
        if (isLightBackground) {
            XStatusBarHelper.setStatusBarFontBlackColor(activity)
        } else {
            XStatusBarHelper.setStatusBarFontWhiteColor(activity)
        }
    }
    
    fun createGradientButton(context: Context, colors: IntArray): GradientDrawable {
        return XGradientHelper.GradientDrawableBuilder()
            .setRadius(XDisplayHelper.dp2px(context, 8f))
            .setGradientColors(colors)
            .setOrientation(GradientDrawable.Orientation.LEFT_RIGHT)
            .build()
    }
    
    fun adaptDeviceSpecific(context: Context) {
        when {
            XDeviceHelper.isMIUI() -> {
                // MIUI 特殊处理
            }
            XDeviceHelper.isFlyme() -> {
                // Flyme 特殊处理
            }
            XDeviceHelper.isHuawei() -> {
                // 华为特殊处理
            }
        }
    }
}
```


## 🏷️ xwidget 自定义属性总览

### 1. 通用基础属性

| 属性名 | 类型 | 说明 | 可选值/示例 |
|--------|------|------|------------|
| `xp_radius` | dimension | 圆角半径 | `8dp` |
| `xp_radiusTopLeft` | dimension | 左上角圆角 | `8dp` |
| `xp_radiusTopRight` | dimension | 右上角圆角 | `8dp` |
| `xp_radiusBottomLeft` | dimension | 左下角圆角 | `8dp` |
| `xp_radiusBottomRight` | dimension | 右下角圆角 | `8dp` |
| `xp_isRadiusAdjustBounds` | boolean | 是否自动半圆 | `true/false` |
| `xp_borderColor` | color | 边框颜色 | `#FF0000` |
| `xp_borderWidth` | dimension | 边框宽度 | `2dp` |
| `xp_shadowElevation` | dimension | 阴影高度 | `4dp` |
| `xp_shadowAlpha` | float | 阴影透明度 | `0.5` |
| `xp_shadowColor` | color | 阴影颜色 | `#20000000` |
| `xp_hideRadiusSide` | enum | 隐藏圆角边 | `none/top/right/bottom/left` |
| `xp_pressedAlpha` | float | 按压时透明度 | `0.8` |
| `xp_disabledAlpha` | float | 禁用时透明度 | `0.5` |
| `xp_pressedScale` | float | 按压时缩放 | `0.95` |
| `xp_disabledScale` | float | 禁用时缩放 | `0.95` |
| `xp_colorFilter` | color | 颜色滤镜 | `#FF0000` |
| `xp_colorFilterMode` | enum | 滤镜模式 | `src, src_atop, multiply, ...` |
| `xp_activated` | boolean | 激活状态 | `true/false` |

### 2. 渐变与多状态属性

| 属性名 | 类型 | 说明 | 可选值/示例 |
|--------|------|------|------------|
| `xp_backgroundGradientColors` | string | 渐变色（多色） | `#FF6B6B,#4ECDC4` |
| `xp_backgroundGradientStartColor` | color | 渐变起始色 | `#FF6B6B` |
| `xp_backgroundGradientEndColor` | color | 渐变结束色 | `#4ECDC4` |
| `xp_backgroundGradientOrientation` | enum | 渐变方向 | `horizontal/vertical/TL_BR/BL_TR` |
| `xp_borderGradientStartColor` | color | 边框渐变起始色 | `#FF6B6B` |
| `xp_borderGradientEndColor` | color | 边框渐变结束色 | `#4ECDC4` |
| `xp_borderGradientOrientation` | enum | 边框渐变方向 | 同上 |
| `xp_pressedBackground` | color | 按压时背景 | `#E74C3C` |
| `xp_pressedBackgroundGradientColors` | string | 按压时渐变色 | `#E74C3C,#C0392B` |
| `xp_checkedBackground` | color | 选中时背景 | `#27AE60` |
| `xp_checkedBackgroundGradientColors` | string | 选中时渐变色 | `#27AE60,#229954` |
| `xp_activatedBackground` | color | 激活时背景 | `#3498DB` |
| `xp_activatedBackgroundGradientColors` | string | 激活时渐变色 | `#3498DB,#2980B9` |
| `xp_disabledBackground` | color | 禁用时背景 | `#95A5A6` |
| `xp_disabledBackgroundGradientColors` | string | 禁用时渐变色 | `#95A5A6,#7F8C8D` |

### 3. 分割线属性

| 属性名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| `xp_topDividerHeight` | dimension | 顶部分割线高度 | `1dp` |
| `xp_topDividerColor` | color | 顶部分割线颜色 | `#E0E0E0` |
| `xp_topDividerInsetLeft` | dimension | 顶部分割线左缩进 | `16dp` |
| `xp_topDividerInsetRight` | dimension | 顶部分割线右缩进 | `16dp` |
| `xp_bottomDividerHeight` | dimension | 底部分割线高度 | `1dp` |
| `xp_bottomDividerColor` | color | 底部分割线颜色 | `#E0E0E0` |
| `xp_bottomDividerInsetLeft` | dimension | 底部分割线左缩进 | `16dp` |
| `xp_bottomDividerInsetRight` | dimension | 底部分割线右缩进 | `16dp` |

### 4. 立体按钮相关属性（XRound系列）

| 属性名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| `xp_cubeSidesGradientColors` | string | 立体侧面渐变色 | `#E74C3C,#27AE60` |
| `xp_cubeFrontHeight` | dimension | 正面高度 | `4dp` |
| `xp_cubeBackHeight` | dimension | 背面高度 | `2dp` |
| `xp_cubeLeftHeight` | dimension | 左侧高度 | `2dp` |
| `xp_cubeRightHeight` | dimension | 右侧高度 | `2dp` |
| `xp_cubeSidesBorderColor` | color | 立体边框色 | `#C0392B` |
| `xp_cubeSidesBorderWidth` | dimension | 立体边框宽 | `1dp` |

### 5. 评分条（XRatingBar）

| 属性名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| `xp_starCount` | integer | 星星数量 | `5` |
| `xp_starSize` | dimension | 星星大小 | `30dp` |
| `xp_starProgress` | float | 当前评分 | `3.5` |
| `xp_starStep` | float | 评分步长 | `0.5` |
| `xp_starSelectedColor` | color | 选中星星颜色 | `#FFC619` |
| `xp_starNormalColor` | color | 未选中星星颜色 | `#DDDDDD` |
| `xp_borderColor` | color | 边框颜色 | `#BF961A` |
| `xp_borderWidth` | dimension | 边框宽度 | `1dp` |
| `xp_starCornerRadius` | dimension | 星星圆角 | `12dp` |
| `xp_isIndicator` | boolean | 是否只读 | `true/false` |
| `xp_ratingGravity` | enum | 评分方向 | `left/right` |

### 6. 复选框（XSmoothCheckBox）

| 属性名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| `xp_cbox_duration` | integer | 动画时长 | `300` |
| `xp_cbox_stroke_width` | dimension | 边框宽度 | `2dp` |
| `xp_cbox_color_tick` | color | 对勾颜色 | `#FFFFFF` |
| `xp_cbox_color_checked` | color | 选中填充色 | `#4CAF50` |
| `xp_cbox_color_unchecked` | color | 未选中填充色 | `#FFFFFF` |
| `xp_cbox_color_unchecked_stroke` | color | 未选中边框色 | `#DFDFDF` |

### 7. 输入框（XInputLayout）

| 属性名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| `xp_clearIconVisible` | boolean | 显示清除图标 | `true/false` |
| `xp_eyeIconVisible` | boolean | 显示眼睛图标 | `true/false` |
| `xp_clearIconColorFilter` | color | 清除图标颜色 | `#666666` |
| `xp_eyeIconColorFilter` | color | 眼睛图标颜色 | `#666666` |
| `xp_clearIcon_padding` | dimension | 清除图标内边距 | `4dp` |
| `xp_clearIcon_width` | dimension | 清除图标宽度 | `26dp` |
| `xp_clearIcon_height` | dimension | 清除图标高度 | `26dp` |
| `xp_eyeIcon_padding` | dimension | 眼睛图标内边距 | `4dp` |
| `xp_eyeIcon_width` | dimension | 眼睛图标宽度 | `30dp` |
| `xp_eyeIcon_height` | dimension | 眼睛图标高度 | `30dp` |
| `xp_textPassword` | boolean | 密码模式 | `true/false` |
| `xp_eyeOpenDrawable` | reference | 眼睛开图标 | `@drawable/ic_eye_open` |
| `xp_eyeCloseDrawable` | reference | 眼睛关图标 | `@drawable/ic_eye_close` |
| `xp_clearDrawable` | reference | 清除图标 | `@drawable/ic_clear` |
| `xp_disableCopyAndPaste` | boolean | 禁用复制粘贴 | `true/false` |

### 8. SwitchButton（XSwitchButton）

| 属性名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| `xp_swb_thumbColor` | color | 滑块颜色 | `#FFFFFF` |
| `xp_swb_backgroundColor_switchOn` | color | 开启时背景色 | `#4CAF50` |
| `xp_swb_backgroundColor_switchOff` | color | 关闭时背景色 | `#CCCCCC` |
| `xp_swb_thumbRadius` | dimension | 滑块圆角 | `14dp` |
| `xp_swb_backgroundRadius` | dimension | 背景圆角 | `15dp` |
| `xp_swb_animationDuration` | integer | 动画时长 | `250` |
| `xp_swb_thumbRangeRatio` | float | 滑块范围比例 | `1.8` |
| `xp_swb_text_switchOn` | string | 开启文字 | `"开"` |
| `xp_swb_text_switchOff` | string | 关闭文字 | `"关"` |

### 9. 其他常用属性

- `xp_ignoreGlobalTypeface`：是否忽略全局字体切换
- `xp_outlineInsetTop/Left/Right/Bottom`：阴影内边距
- `xp_outlineExcludePadding`：阴影是否排除padding
- `xp_showBorderOnlyBeforeL`：5.0以下只显示边框
- `xp_outerNormalColor`：外部正常颜色

---

如需详细了解每个控件支持的全部属性，请查阅源码中的 `attrs.xml`、`xround_attrs.xml` 等文件。此表格已覆盖绝大多数常用和核心属性，能满足绝大多数开发需求。
